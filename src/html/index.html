<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Slot Machine Service</title>
    <link rel="stylesheet" href=".\styles\styles.css">
</head>
<body>
    <header>
        <h1>Slot Machine</h1>
    </header>
    <main>
        <section>
            <p>
               Esta máquina tragaperras se ha desarrollado únicamente con fines de formación. Yo no apoyo el juego de ninguna manera, ni animo a los juegos de azar. Si lo hace, asegúrese de ganar o jugar con seguridad.

                El proyecto actualmente tiene un script principal, donde toda la lógica de la máquina tragaperras está codificada. Se trata de una simple máquina tragaperras ejecutada en terminal que utiliza un conjunto de posibles caracteres como símbolos, generando los patrones ganadores utilizando valores aleatorios y escogiendo los valores de los caracteres de un conjunto.

            </p>
        </section>
        <section>
            <h2> A jugar!</h2>
            <p>
               El balance inicial son 100$
               <form id="game-form">
                <label for="bet">Apuesta por línea:</label>
                <input type="number" id="bet" name="bet" min="1" max="100" required><br><br>
        
                <label for="lines">Número de líneas (1-3):</label>
                <input type="number" id="lines" name="lines" min="1" max="3" required><br><br>
        
                <label for="balance">Saldo actual:</label>
                <input type="number" id="balance" name="balance" value="100" readonly><br><br>
        
                <button type="submit">Jugar</button>
            </form>
        
            <div id="result"></div>
        
            <script>
                document.getElementById("game-form").addEventListener("submit", function(event) {
                    event.preventDefault();
        
                    let bet = document.getElementById("bet").value;
                    let lines = document.getElementById("lines").value;
                    let balance = document.getElementById("balance").value;
        
                    fetch("/play", {
                        method: "POST",
                        body: new URLSearchParams({
                            'bet': bet,
                            'lines': lines,
                            'balance': balance
                        }),
                        headers: {
                            'Content-Type': 'application/x-www-form-urlencoded',
                        },
                    })
                    .then(response => response.json())
                    .then(data => {
                        document.getElementById("result").innerHTML = `<h2>Resultado:</h2><pre>${data.result}</pre><h3>Saldo: ${data.balance}$</h3>`;
                        document.getElementById("balance").value = data.balance;
                    });
                });
            </script>
            </p>
            <br>
            <br>
            <br>
            <br>
        </section>
    </main>
    <footer>
        <p>Aplicación basada en <a href="https://github.com/jmpanper/Slot-Machine" target="_blank">un proyecto didáctico personal</a></p>
        <p>José Miguel Panadero Pérez 2025</p>
    </footer>
</body>
</html>